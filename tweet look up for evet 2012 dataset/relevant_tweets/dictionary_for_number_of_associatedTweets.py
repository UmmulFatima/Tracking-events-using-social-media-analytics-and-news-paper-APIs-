import itertools
import pandas as pd
from tabulate import tabulate
import json
import matplotlib.pyplot as plt

my_dict = {0: 333, 1: 6894, 2: 955, 3: 944, 4: 481, 5: 1062, 6: 1024, 7: 906, 8: 12805, 9: 333, 10: 216, 11: 5243, 12: 1126,
     13: 135, 14: 1796, 15: 1241, 16: 198, 17: 225, 18: 919, 19: 341, 20: 787, 21: 323, 22: 2967, 23: 607, 24: 169,
     25: 103, 26: 284, 27: 514, 28: 321, 29: 241, 30: 361, 31: 1281, 32: 682, 33: 315, 34: 545, 35: 715, 36: 773,
     37: 383, 38: 329, 39: 255, 40: 295, 41: 272, 42: 388, 43: 311, 44: 324, 45: 205, 46: 1060, 47: 883, 48: 256,
     49: 483, 50: 227, 51: 311, 52: 2289, 53: 375, 54: 585, 55: 1367, 56: 1496, 57: 859, 58: 117, 59: 719, 60: 352,
     61: 653, 62: 253, 63: 143, 64: 182, 65: 219, 66: 383, 67: 208, 68: 154, 69: 108, 70: 141, 71: 376, 72: 199, 73: 69,
     74: 76, 75: 279, 76: 145, 77: 73, 78: 65, 79: 71, 80: 103, 81: 30, 82: 77, 83: 213, 84: 77, 85: 192, 86: 35,
     87: 137, 88: 35, 89: 36, 90: 37, 91: 158, 92: 139, 93: 77, 94: 40, 95: 33, 96: 182, 97: 47, 98: 215, 99: 45,
     100: 59, 101: 213, 102: 89, 103: 123, 104: 18, 105: 51, 106: 53, 107: 287, 108: 149, 109: 207, 110: 299, 111: 59,
     112: 61, 113: 278, 114: 73, 115: 151, 116: 49, 117: 175, 118: 49, 119: 72, 120: 57, 121: 113, 122: 117, 123: 69,
     124: 97, 125: 125, 126: 201, 127: 187, 128: 53, 129: 151, 130: 73, 131: 31, 132: 57, 133: 159, 134: 35, 135: 61,
     136: 155, 137: 73, 138: 125, 139: 85, 140: 71, 141: 177, 142: 63, 143: 115, 144: 111, 145: 57, 146: 420, 147: 59,
     148: 23, 149: 41, 150: 49, 151: 143, 152: 79, 153: 289, 154: 773, 155: 183, 156: 47, 157: 1634, 158: 135, 159: 93,
     160: 101, 161: 45, 162: 257, 163: 667, 164: 357, 165: 123, 166: 87, 167: 133, 168: 59, 169: 203, 170: 151, 171: 85,
     172: 147, 173: 39, 174: 37, 175: 105, 176: 75, 177: 226, 178: 55, 179: 131, 180: 345, 181: 211, 182: 105, 183: 215,
     184: 125, 185: 361, 186: 85, 187: 160, 188: 161, 189: 72, 190: 2, 191: 179, 192: 24, 193: 253, 194: 220, 195: 119,
     196: 238, 197: 35, 198: 0, 199: 0, 200: 5, 201: 10, 202: 0, 203: 224, 204: 22, 205: 24, 206: 1, 207: 40, 208: 9,
     209: 78, 210: 63, 211: 112, 212: 25, 213: 192, 214: 103, 215: 71, 216: 132, 217: 163, 218: 10, 219: 66, 220: 120,
     221: 43, 222: 83, 223: 82, 224: 37, 225: 40, 226: 237, 227: 110, 228: 15, 229: 16, 230: 101, 231: 8, 232: 10,
     233: 9, 234: 5, 235: 0, 236: 19, 237: 149, 238: 53, 239: 235, 240: 254, 241: 116, 242: 28, 243: 255, 244: 41,
     245: 7, 246: 215, 247: 51, 248: 18, 249: 124, 250: 3, 251: 27, 252: 39, 253: 21, 254: 244, 255: 169, 256: 241,
     257: 34, 258: 113, 259: 56, 260: 78, 261: 182, 262: 0, 263: 56, 264: 15, 265: 170, 266: 169, 267: 47, 268: 72,
     269: 17, 270: 76, 271: 143, 272: 21, 273: 177, 274: 86, 275: 113, 276: 7, 277: 18, 278: 119, 279: 114, 280: 246,
     281: 37, 282: 123, 283: 61, 284: 81, 285: 22, 286: 2, 287: 46, 288: 93, 289: 6, 290: 11, 291: 26, 292: 33,
     293: 136, 294: 113, 295: 156, 296: 232, 297: 26, 298: 247, 299: 206, 300: 89, 301: 86, 302: 57, 303: 59, 304: 26,
     305: 53, 306: 65, 307: 256, 308: 92, 309: 71, 310: 29, 311: 2, 312: 86, 313: 75, 314: 82, 315: 118, 316: 235,
     317: 255, 318: 29, 319: 0, 320: 178, 321: 30, 322: 220, 323: 26, 324: 14, 325: 43, 326: 46, 327: 15, 328: 90,
     329: 137, 330: 72, 331: 32, 332: 68, 333: 40, 334: 13, 335: 17, 336: 14, 337: 86, 338: 102, 339: 49, 340: 23,
     341: 112, 342: 72, 343: 6, 344: 144, 345: 22, 346: 2, 347: 159, 348: 31, 349: 166, 350: 16, 351: 114, 352: 33,
     353: 226, 354: 75, 355: 213, 356: 21, 357: 196, 358: 6, 359: 51, 360: 23, 361: 27, 362: 66, 363: 215, 364: 153,
     365: 105, 366: 73, 367: 26, 368: 22, 369: 25, 370: 31, 371: 0, 372: 6, 373: 16, 374: 20, 375: 17, 376: 57, 377: 3,
     378: 15, 379: 52, 380: 31, 381: 9, 382: 77, 383: 243, 384: 31, 385: 0, 386: 32, 387: 43, 388: 69, 389: 26,
     390: 179, 391: 168, 392: 1, 393: 74, 394: 401, 395: 24, 396: 60, 397: 10, 398: 91, 399: 47, 400: 69, 401: 24,
     402: 84, 403: 93, 404: 19, 405: 152, 406: 195, 407: 131, 408: 51, 409: 80, 410: 1, 411: 52, 412: 26, 413: 88,
     414: 22, 415: 25, 416: 62, 417: 26, 418: 10, 419: 140, 420: 46, 421: 169, 422: 144, 423: 40, 424: 70, 425: 9,
     426: 203, 427: 250, 428: 23, 429: 69, 430: 0, 431: 22, 432: 29, 433: 36, 434: 162, 435: 84, 436: 96, 437: 83,
     438: 48, 439: 132, 440: 62, 441: 139, 442: 23, 443: 30, 444: 3, 445: 18, 446: 93, 447: 112, 448: 49, 449: 11,
     450: 19, 451: 100, 452: 29, 453: 23, 454: 74, 455: 23, 456: 261, 457: 14, 458: 63, 459: 8, 460: 29, 461: 34,
     462: 7, 463: 36, 464: 155, 465: 58, 466: 30, 467: 103, 468: 6, 469: 3, 470: 101, 471: 41, 472: 67, 473: 35,
     474: 139, 475: 125, 476: 4, 477: 116, 478: 149, 479: 67, 480: 97, 481: 114, 482: 178, 483: 67, 484: 240, 485: 26,
     486: 214, 487: 203, 488: 233, 489: 27, 490: 203, 491: 52, 492: 65, 493: 112, 494: 29, 495: 5, 496: 62, 497: 22,
     498: 63, 499: 37, 500: 41, 501: 159, 502: 621, 503: 51, 504: 375}

d = json.dumps(my_dict)
# print(d)


headers = ['Number of related tweet', 'Event Id']
data = sorted([(v, k) for k, v in my_dict.items()], reverse=True)
# print(tabulate(data[:15], headers=headers, tablefmt='grid'))

event_Id = []
for k,v in data[:15]:
    event_Id.append(v)
# print(event_Id)


s = sorted([(v, k) for k, v in data[:100]], reverse=True)
plt.plot(s)
plt.xlabel("Event Id")
plt.ylabel("Number of associated tweets")
plt.show()


# the dictionary of associated tweets for each event read into csv file

# df = pd.DataFrame(data)
# df.columns = ["Number of associated tweet", "Event Id"]
# df.to_csv("dict.csv", index=0)